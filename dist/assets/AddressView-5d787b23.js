import{A as G,B as R,M as W,L as te,C as ne,D as K,E as J,r as I,a as $,e as o,H as Z,G as se,P as oe,ak as ae,al as V,am as le,an as ce,ao as ie,ah as j,a5 as re,K as Q,U as de,O as U,af as z,ap as ue,X as fe,Z as me,J as ge,aq as he,_ as ve,s as _e,u as Be,l as Ce,b as x,c as D,d as u,F as we,g as be,w as q,v as ke,t as A,i as pe,I as ye,p as Se,k as Te}from"./index-5e3051ec.js";import{n as Pe}from"./navBar-2ff5468b.js";import{g as Ae,d as xe}from"./index-4665fd60.js";import{u as De}from"./addressInfo-29843528.js";import{B as L,b as X,a as Ee}from"./index-6b6d28e5.js";import{p as Oe,b as Ie,P as Re,m as Ne,c as He,u as We}from"./http-c830e3c3.js";import{u as Le}from"./use-expose-52ad8c3a.js";import{a as E}from"./function-call-cb4b542b.js";import"./index-9a6c82b8.js";const[Fe,g,O]=G("dialog"),$e=R({},Oe,{title:String,theme:String,width:W,message:[String,Function],callback:Function,allowHtml:Boolean,className:te,transition:ne("van-dialog-bounce"),messageAlign:String,closeOnPopstate:K,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:K,closeOnClickOverlay:Boolean}),Me=[...Ie,"transition","closeOnPopstate"];var Y=J({name:Fe,props:$e,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:d,slots:a}){const l=I(),i=$({confirm:!1,cancel:!1}),B=n=>d("update:show",n),C=n=>{var r;B(!1),(r=e.callback)==null||r.call(e,n)},k=n=>()=>{e.show&&(d(n),e.beforeClose?(i[n]=!0,j(e.beforeClose,{args:[n],done(){C(n),i[n]=!1},canceled(){i[n]=!1}})):C(n))},v=k("cancel"),s=k("confirm"),w=ae(n=>{var r,f;if(n.target!==((f=(r=l.value)==null?void 0:r.popupRef)==null?void 0:f.value))return;({Enter:e.showConfirmButton?s:V,Escape:e.showCancelButton?v:V})[n.key](),d("keydown",n)},["enter","esc"]),T=()=>{const n=a.title?a.title():e.title;if(n)return o("div",{class:g("header",{isolated:!e.message&&!a.default})},[n])},p=n=>{const{message:r,allowHtml:f,messageAlign:m}=e,S=g("message",{"has-title":n,[m]:m}),P=le(r)?r():r;return f&&typeof P=="string"?o("div",{class:S,innerHTML:P},null):o("div",{class:S},[P])},y=()=>{if(a.default)return o("div",{class:g("content")},[a.default()]);const{title:n,message:r,allowHtml:f}=e;if(r){const m=!!(n||a.title);return o("div",{key:f?1:0,class:g("content",{isolated:!m})},[p(m)])}},c=()=>o("div",{class:[ie,g("footer")]},[e.showCancelButton&&o(L,{size:"large",text:e.cancelButtonText||O("cancel"),class:g("cancel"),style:{color:e.cancelButtonColor},loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&o(L,{size:"large",text:e.confirmButtonText||O("confirm"),class:[g("confirm"),{[ce]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:s},null)]),_=()=>o(Ee,{class:g("footer")},{default:()=>[e.showCancelButton&&o(X,{type:"warning",text:e.cancelButtonText||O("cancel"),class:g("cancel"),color:e.cancelButtonColor,loading:i.cancel,disabled:e.cancelButtonDisabled,onClick:v},null),e.showConfirmButton&&o(X,{type:"danger",text:e.confirmButtonText||O("confirm"),class:g("confirm"),color:e.confirmButtonColor,loading:i.confirm,disabled:e.confirmButtonDisabled,onClick:s},null)]}),N=()=>a.footer?a.footer():e.theme==="round-button"?_():c();return()=>{const{width:n,title:r,theme:f,message:m,className:S}=e;return o(Re,Z({ref:l,role:"dialog",class:[g([f]),S],style:{width:oe(n)},tabindex:0,"aria-labelledby":r||m,onKeydown:w,"onUpdate:show":B},se(e,Me)),{default:()=>[T(),y(),N()]})}}});let F;const Ke={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Ve=R({},Ke);function Ue(){({instance:F}=Ne({setup(){const{state:d,toggle:a}=He();return()=>o(Y,Z(d,{"onUpdate:show":a}),null)}}))}function ze(e){return re?new Promise((d,a)=>{F||Ue(),F.open(R({},Ve,e,{callback:l=>{(l==="confirm"?d:a)(l)}}))}):Promise.resolve()}const qe=e=>ze(R({showCancelButton:!0},e));Q(Y);const[Xe,H]=G("swipe-cell"),Ge={name:de(""),disabled:Boolean,leftWidth:W,rightWidth:W,beforeClose:Function,stopPropagation:Boolean};var Je=J({name:Xe,props:Ge,emits:["open","close","click"],setup(e,{emit:d,slots:a}){let l,i,B;const C=I(),k=I(),v=I(),s=$({offset:0,dragging:!1}),w=We(),T=t=>t.value?me(t).width:0,p=U(()=>z(e.leftWidth)?+e.leftWidth:T(k)),y=U(()=>z(e.rightWidth)?+e.rightWidth:T(v)),c=t=>{s.offset=t==="left"?p.value:-y.value,l||(l=!0,d("open",{name:e.name,position:t}))},_=t=>{s.offset=0,l&&(l=!1,d("close",{name:e.name,position:t}))},N=t=>{const h=Math.abs(s.offset),b=.15,ee=l?1-b:b,M=t==="left"?p.value:y.value;M&&h>M*ee?c(t):_(t)},n=t=>{e.disabled||(B=s.offset,w.start(t))},r=t=>{if(e.disabled)return;const{deltaX:h}=w;w.move(t),w.isHorizontal()&&(i=!0,s.dragging=!0,(!l||h.value*B<0)&&ge(t,e.stopPropagation),s.offset=he(h.value+B,-y.value,p.value))},f=()=>{s.dragging&&(s.dragging=!1,N(s.offset>0?"left":"right"),setTimeout(()=>{i=!1},0))},m=(t="outside")=>{d("click",t),l&&!i&&j(e.beforeClose,{args:[{name:e.name,position:t}],done:()=>_(t)})},S=(t,h)=>b=>{h&&b.stopPropagation(),m(t)},P=(t,h)=>{const b=a[t];if(b)return o("div",{ref:h,class:H(t),onClick:S(t,!0)},[b()])};return Le({open:c,close:_}),ue(C,()=>m("outside"),{eventName:"touchstart"}),fe("touchmove",r,{target:C}),()=>{var t;const h={transform:`translate3d(${s.offset}px, 0, 0)`,transitionDuration:s.dragging?"0s":".6s"};return o("div",{ref:C,class:H(),onClick:S("cell",i),onTouchstartPassive:n,onTouchend:f,onTouchcancel:f},[o("div",{class:H("wrapper"),style:h},[P("left",k),(t=a.default)==null?void 0:t.call(a),P("right",v)])])}}});const Ze=Q(Je);const je=e=>(Se("data-v-2ae8c520"),e=e(),Te(),e),Qe={class:"address-container"},Ye={class:"nav-bar"},et={class:"main"},tt={class:"item"},nt=["onClick"],st={class:"surname"},ot={class:"right"},at=["onClick"],lt={class:"fullname"},ct={class:"head"},it={class:"tel"},rt={key:0,class:"default"},dt={class:"content"},ut=je(()=>u("div",{class:"divider"},null,-1)),ft={__name:"AddressView",setup(e){const{addressInfo:d}=_e(De()),a=$({list:[]}),l=Be(),i=async()=>{let s=await Ae();a.list=s.data,console.log(s)};Ce(()=>{i()});const B=()=>{l.push({name:"AddressAdd"})},C=s=>{l.push({name:"AddressEdit",params:{id:s}})},k=s=>{qe({title:"标题",message:"点击确定将会删除该地址"}).then(async()=>{(await xe(s)).data?(E({type:"success",message:"删除成功"}),i()):E({type:"warning",message:"删除失败"})}).catch(()=>{E({type:"success",message:"您取消了删除"})})},v=s=>{d.value=s,E({type:"success",message:"选中地址成功"}),l.back()};return(s,w)=>{const T=ye,p=L,y=Ze;return x(),D("div",Qe,[u("div",Ye,[o(Pe,{title:"地址管理"})]),u("div",et,[(x(!0),D(we,null,be(a.list,c=>(x(),D("div",{class:"address-item",key:c.id},[o(y,null,{right:q(()=>[o(p,{square:"",text:"删除",type:"danger",class:"delete-button del-address-btn",id:"del-address-btn",onClick:ke(_=>k(c.id),["stop"])},null,8,["onClick"])]),default:q(()=>[u("div",tt,[u("div",{class:"left",onClick:_=>v(c)},[u("div",st,A(c.name[0]),1)],8,nt),u("div",ot,[u("div",{class:"info",onClick:_=>v(c)},[u("div",lt,"名称："+A(c.name),1),u("div",ct,[u("div",it,"电话："+A(c.mobile),1),c.is_default?(x(),D("div",rt," 默认")):pe("",!0)]),u("div",dt,A(c.address)+A(c.address_detail),1)],8,at),o(T,{name:"edit",class:"edit",onClick:_=>C(c.id)},null,8,["onClick"])]),ut])]),_:2},1024)]))),128))]),u("button",{class:"addAddress",onClick:B},"+新建地址")])}}},kt=ve(ft,[["__scopeId","data-v-2ae8c520"]]);export{kt as default};
