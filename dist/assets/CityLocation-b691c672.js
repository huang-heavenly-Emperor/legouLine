import{_ as w,u as S,s as I,r as L,a as x,l as z,b as v,c as _,e as m,d as p,f as b,F as V,g as B,t as N,p as E,k as F,I as O}from"./index-5e3051ec.js";import"./index-0b78405c.js";import{S as P}from"./index-be39fce2.js";import{N as R}from"./index-9a6c82b8.js";import{u as T}from"./markerLocation-2beb2385.js";import{d as U}from"./debounce-cfb0e9ed.js";import"./use-id-5f39560e.js";import"./use-expose-52ad8c3a.js";const D=c=>(E("data-v-aa17665f"),c=c(),F(),c),K={class:"searchLocation-container"},$={class:"search"},j={class:"search-list"},q=["onClick"],G={class:"left van-ellipsis"},H=D(()=>p("div",{class:"",id:"searchContain"},null,-1)),J={__name:"CityLocation",setup(c){const f=S();var l;let h;const{addressInfo:e,lnglat:Q}=I(T()),u=L(""),i=x({list:[]}),M=()=>{e.value.location&&e.value.location.lat?(console.log(e.value.location.lng,e.value.location.lat),l=new AMap.Map("searchContain",{resizeEnable:!0,center:[e.value.location.lng,e.value.location.lat],zoom:11}),h=new AMap.Marker({imageSize:new AMap.Size(49,69),position:[e.value.location.lng,e.value.location.lat],title:e.value.name,label:{content:e.value.address+e.value.name,direction:"top"},offset:new AMap.Pixel(0,-10)}),l.add(h)):l=new AMap.Map("searchContain",{resizeEnable:!0,zoom:11})};z(()=>{M(),A()});const g=()=>{f.push("/")},A=()=>{console.log("进来"),AMap.plugin("AMap.CitySearch",()=>{var o=new AMap.CitySearch;o.getLocalCity((n,s)=>{n==="complete"&&s.info==="OK"&&(console.log(11111111111111111e6,s),e.value=s)})})},C=U(()=>{AMap.plugin("AMap.AutoComplete",()=>{console.log(e.value.city);var o={city:e.value.city},n=new AMap.AutoComplete(o);n.search(u.value,function(s,r){i.list=r.tips||[],l.clearMap();for(var t=0;t<i.list.length;t++){var a=i.list[t];let d=[];d[t]=new AMap.Marker({imageSize:new AMap.Size(49,69),position:[a.location.lng,a.location.lat],title:a.name,label:{content:a.address+a.name,direction:"top"},offset:new AMap.Pixel(0,-10)}),l.add(d[t])}console.log(r.tips)})})},250),y=o=>{console.log(o),e.value=o,e.value.city=o.name,f.push("/")},k=()=>{};return(o,n)=>{const s=R,r=P,t=O;return v(),_("div",K,[m(s,{title:"城市定位","left-text":"返回","left-arrow":"",onClickLeft:g}),p("div",$,[m(r,{modelValue:u.value,"onUpdate:modelValue":[n[0]||(n[0]=a=>u.value=a),b(C)],placeholder:"请输入搜索关键词",id:"input",onClickInput:k},null,8,["modelValue","onUpdate:modelValue"])]),p("div",j,[(v(!0),_(V,null,B(i.list,(a,d)=>(v(),_("div",{class:"search-item",key:a.id+a.name,onClick:W=>y(a)},[p("div",G,N(a.name),1),m(t,{name:"arrow",class:"right"})],8,q))),128))]),H])}}},se=w(J,[["__scopeId","data-v-aa17665f"]]);export{se as default};
