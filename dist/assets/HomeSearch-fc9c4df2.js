import{_ as q,r as d,u as E,q as R,a as D,o as j,b as a,c as n,e as l,w as B,d as r,F as b,g as S,i as p,h as z,v as K,t as L,p as G,k as J,I as Q}from"./index-5e3051ec.js";import{S as X}from"./index-0f76cfe5.js";import"./index-0b78405c.js";import{S as Y}from"./index-be39fce2.js";import{N as Z}from"./index-9a6c82b8.js";import{i as v,s as tt}from"./http-c830e3c3.js";import{_ as et}from"./productListComponent-1e31a7fe.js";import{t as ot}from"./tabBarComponent-eddb6420.js";import{d as st}from"./debounce-cfb0e9ed.js";import"./use-id-5f39560e.js";import"./use-expose-52ad8c3a.js";/* empty css                                                             */function at(s){return v({url:"/bufan/search/clearhistoryAction",method:"POST",data:{openId:s}})}function rt(s){return v({url:"/bufan/search/addhistoryaction",method:"POST",data:s})}function nt(s){return v({url:"/bufan/search/helperaction",data:s})}function it(s){return v({url:"/bufan/search/indexaction",data:s})}const V=s=>(G("data-v-3a07bcb0"),s=s(),J(),s),ct={class:"home-search-container",ref:"home-search-container"},dt={class:"search-box"},lt={class:"main"},ut={key:0,class:"search-history"},ht={key:0,class:"history temp"},pt={class:"head"},_t=V(()=>r("div",{class:"left"},"历史记录",-1)),vt={class:"temp-list"},yt={class:"hotSearch temp"},mt=V(()=>r("div",{class:"head"},[r("div",{class:"left"},"热门搜索")],-1)),ft={class:"temp-list"},kt={key:1,class:"search-tip"},wt=["onClick"],bt={class:"left"},St={key:2,class:"search-resList"},Lt={class:"tabbar"},gt={class:"list"},Ct={__name:"HomeSearch",setup(s){const W=async()=>{await at(m),w()},y=d(!0),$=o=>{let t={keyword:i.value,order:""};t.order=o,f(t)},A=d(1),H=d(),g=E(),C=d(0),N=async o=>{await rt({keyword:o,openId:m})},O=()=>{g.push("/")},P=()=>{console.log("1111111111111111111111111111111111111111111111111"),c.value="history"},T=d(),{openId:m}=R(),f=async(o,t)=>{if(o.keyword==="")return;y.value=!0;let{keywords:h}=await nt(o);w(),_.tipWordList=h,y.value=!1,t&&(c.value=t),console.log(_.tipWordList)},_=D({tipWordList:[]}),k=o=>{i.value=o,N(o),f({keyword:o,order:""},"resList")},w=async()=>{let{defaultKeyword:o,hotKeywordList:t,historyData:h}=await it({openId:m});if(o.id===void 0){tt("加载失败请重试"),g.back();return}else u.defaultKeyword=o,u.hotKeywordList=t,u.historyData=h},u=D({defaultKeyword:{},hotKeywordList:[],historyData:[{keyword:"肯定是累计缴费刚开始的",id:1},{keyword:"电饭锅",id:2},{keyword:"盛世嫡妃第三方",id:3},{keyword:"管",id:4},{keyword:"地址管",id:5},{keyword:"地址管",id:6},{keyword:"点击生不逢时记得吗",id:7},{keyword:"地址管",id:8}]});j(()=>{w()});const c=d("history"),i=d(""),U=st(()=>{let o={keyword:i.value,order:"asc"};f(o)},300),F=()=>{U()};return(o,t)=>{const h=Z,M=Y,x=X,I=Q;return a(),n("div",ct,[l(x,{container:H.value},{default:B(()=>[c.value!=="tip"?(a(),z(h,{key:0,title:"标题","left-text":"返回","left-arrow":"",onClickLeft:O})):p("",!0),r("div",dt,[l(M,{modelValue:i.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>i.value=e),F],shape:"round","show-action":"",placeholder:"请输入搜索关键词",onSearch:t[1]||(t[1]=e=>k(i.value)),onCancel:P,onClickInput:t[2]||(t[2]=K(e=>c.value="tip",["stop"])),onClickLeftIcon:t[3]||(t[3]=e=>k(i.value)),onClear:t[4]||(t[4]=K(e=>i.value="",["stop"]))},null,8,["modelValue"])])]),_:1},8,["container"]),r("div",lt,[c.value==="history"?(a(),n("div",ut,[u.historyData.length?(a(),n("div",ht,[r("div",pt,[_t,l(I,{name:"delete-o",class:"right",onClick:W})]),r("ul",vt,[(a(!0),n(b,null,S(u.historyData,e=>(a(),n("li",{key:e.id,class:"temp-item"},L(e.keyword),1))),128))])])):p("",!0),r("div",yt,[mt,r("ul",ft,[(a(!0),n(b,null,S(u.hotKeywordList,e=>(a(),n("li",{key:e.id,class:"temp-item"},L(e.keyword),1))),128))])])])):p("",!0),c.value==="tip"?(a(),n("div",kt,[(a(!0),n(b,null,S(_.tipWordList,e=>(a(),n("div",{class:"tip-item",key:e.id,onClick:xt=>k(e.name)},[r("div",bt,L(e.name),1),l(I,{name:"arrow",class:"right"})],8,wt))),128))])):p("",!0),c.value==="resList"?(a(),n("div",St,[l(x,{"offset-top":"218"},{default:B(()=>[r("div",Lt,[l(ot,{sortable:A.value,actArrow:"asc",inactiveArrow:"desc",active:C.value,"onUpdate:active":t[5]||(t[5]=e=>C.value=e),onSendData:$},null,8,["sortable","active"])])]),_:1}),r("div",gt,[l(et,{ref_key:"productListCom",ref:T,"search-product-list":_.tipWordList,"show-loading":y.value},null,8,["search-product-list","show-loading"])])])):p("",!0)])],512)}}},Tt=q(Ct,[["__scopeId","data-v-3a07bcb0"]]);export{Tt as default};
