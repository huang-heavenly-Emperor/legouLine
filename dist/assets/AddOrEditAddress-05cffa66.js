import{A as R,E as $,S as Y,e as u,M as K,L as E,P as G,K as M,r as S,B as J,R as P,au as Q,D as O,C as W,Y as D,I as F,ad as X,_ as Z,x as ee,u as se,o as te,q as ae,a as oe,b as le,c as de,d as r,ab as B,av as I,w as ne,t as ie,f as ce,p as re,k as ue}from"./index-5e3051ec.js";import"./index-0f76cfe5.js";import{u as me,T as ve,a as fe}from"./index-1188e782.js";import{n as pe}from"./navBar-2ff5468b.js";import{u as he}from"./index.esm-17a7a4a4.js";import{a as _e,s as be}from"./index-4665fd60.js";import{L as ke,d as H,a as ge,P as Ce}from"./http-c830e3c3.js";import"./use-id-5f39560e.js";import"./use-expose-52ad8c3a.js";import"./use-tab-status-233d5ab8.js";import"./index-7bb8ccc7.js";import"./index-9a6c82b8.js";const[we,U]=R("switch"),Ve={size:K,loading:Boolean,disabled:Boolean,modelValue:E,activeColor:String,inactiveColor:String,activeValue:{type:E,default:!0},inactiveValue:{type:E,default:!1}};var ye=$({name:we,props:Ve,emits:["change","update:modelValue"],setup(o,{emit:m,slots:p}){const d=()=>o.modelValue===o.activeValue,v=()=>{if(!o.disabled&&!o.loading){const h=d()?o.inactiveValue:o.activeValue;m("update:modelValue",h),m("change",h)}},C=()=>{if(o.loading){const h=d()?o.activeColor:o.inactiveColor;return u(ke,{class:U("loading"),color:h},null)}if(p.node)return p.node()};return Y(()=>o.modelValue),()=>{var h;const{size:w,loading:s,disabled:_,activeColor:V,inactiveColor:f}=o,t=d(),b={fontSize:G(w),backgroundColor:t?V:f};return u("div",{role:"switch",class:U({on:t,loading:s,disabled:_}),style:b,tabindex:_?void 0:0,"aria-checked":t,onClick:v},[u("div",{class:U("node")},[C()]),(h=p.background)==null?void 0:h.call(p)])}}});const Se=M(ye),[Te,k,Ae]=R("cascader"),xe={title:String,options:Q(),closeable:O,swipeable:O,closeIcon:W("cross"),showHeader:O,modelValue:K,fieldNames:Object,placeholder:String,activeColor:String};var Be=$({name:Te,props:xe,emits:["close","change","finish","clickTab","update:modelValue"],setup(o,{slots:m,emit:p}){const d=S([]),v=S(0),[C,h]=me(),{text:w,value:s,children:_}=J({text:"text",value:"value",children:"children"},o.fieldNames),V=(e,a)=>{for(const n of e){if(n[s]===a)return[n];if(n[_]){const l=V(n[_],a);if(l)return[n,...l]}}},f=()=>{const{options:e,modelValue:a}=o;if(a!==void 0){const n=V(e,a);if(n){let l=e;d.value=n.map(c=>{const T={options:l,selected:c},g=l.find(x=>x[s]===c[s]);return g&&(l=g[_]),T}),l&&d.value.push({options:l,selected:null}),D(()=>{v.value=d.value.length-1});return}}d.value=[{options:e,selected:null}]},t=(e,a)=>{if(e.disabled)return;if(d.value[a].selected=e,d.value.length>a+1&&(d.value=d.value.slice(0,a+1)),e[_]){const c={options:e[_],selected:null};d.value[a+1]?d.value[a+1]=c:d.value.push(c),D(()=>{v.value++})}const n=d.value.map(c=>c.selected).filter(Boolean);p("update:modelValue",e[s]);const l={value:e[s],tabIndex:a,selectedOptions:n};p("change",l),e[_]||p("finish",l)},b=()=>p("close"),y=({name:e,title:a})=>p("clickTab",e,a),N=()=>o.showHeader?u("div",{class:k("header")},[u("h2",{class:k("title")},[m.title?m.title():o.title]),o.closeable?u(F,{name:o.closeIcon,class:[k("close-icon"),X],onClick:b},null):null]):null,i=(e,a,n)=>{const{disabled:l}=e,c=!!(a&&e[s]===a[s]),T=e.color||(c?o.activeColor:void 0),g=m.option?m.option({option:e,selected:c}):u("span",null,[e[w]]);return u("li",{ref:c?h(n):void 0,role:"menuitemradio",class:[k("option",{selected:c,disabled:l}),e.className],style:{color:T},tabindex:l?void 0:c?0:-1,"aria-checked":c,"aria-disabled":l||void 0,onClick:()=>t(e,n)},[g,c?u(F,{name:"success",class:k("selected-icon")},null):null])},L=(e,a,n)=>u("ul",{role:"menu",class:k("options")},[e.map(l=>i(l,a,n))]),z=(e,a)=>{const{options:n,selected:l}=e,c=o.placeholder||Ae("select"),T=l?l[w]:c;return u(fe,{title:T,titleClass:k("tab",{unselected:!l})},{default:()=>{var g,x;return[(g=m["options-top"])==null?void 0:g.call(m,{tabIndex:a}),L(n,l,a),(x=m["options-bottom"])==null?void 0:x.call(m,{tabIndex:a})]}})},j=()=>u(ve,{active:v.value,"onUpdate:active":e=>v.value=e,shrink:!0,animated:!0,class:k("tabs"),color:o.activeColor,swipeable:o.swipeable,onClickTab:y},{default:()=>[d.value.map(z)]}),q=e=>{const a=e.parentElement;a&&(a.scrollTop=e.offsetTop-(a.offsetHeight-e.offsetHeight)/2)};return f(),P(v,e=>{const a=C.value[e];a&&q(a)}),P(()=>o.options,f,{deep:!0}),P(()=>o.modelValue,e=>{e!==void 0&&d.value.map(n=>{var l;return(l=n.selected)==null?void 0:l[s]}).includes(e)||f()}),()=>u("div",{class:k()},[N(),j()])}});const Ie=M(Be);const A=o=>(re("data-v-d7d97d7a"),o=o(),ue(),o),Ne={class:"addOrEditAddress"},Ee={class:"nav-bar"},Pe={class:"main"},Oe={class:"item"},Ue=A(()=>r("div",{class:"left"},"收货人",-1)),De={class:"item"},Fe=A(()=>r("div",{class:"left"},"手机号码",-1)),He={class:"item"},Re=A(()=>r("div",{class:"left"},"所在地区",-1)),$e={class:"item"},Ke=A(()=>r("div",{class:"left"},"详细地址",-1)),Me={class:"item"},Le=A(()=>r("div",{class:"left"},"设为默认地址",-1)),ze={__name:"AddOrEditAddress",setup(o){const m=ee(),p=se();te(()=>{m.params.id&&(s.addressId=m.params.id,_(m.params.id))});const d=he(),v=S(!1),C=S("");S("");const h=({selectedOptions:f})=>{v.value=!1,console.log(f);let t=f.map(b=>b.text);s.address=t.join(" ")},w=ae();S(!1);const s=oe({address:"",addressId:"",checked:!1,detailadress:"",openId:w.openId,telNumber:"",userName:""}),_=async f=>{let t=await _e(f);console.log(t),s.address=t.data.address,s.checked=!!t.data.is_default,s.detailadress=t.data.address_detail,s.telNumber=t.data.mobile,s.userName=t.data.name},V=async()=>{for(const y in s)if(!s[y]&&y!=="addressId"){H({message:"请完善信息！！！",wordBreak:"break-word",forbidClick:!0});return}let f=s.addressId?"更新地址成功":"新增地址成功",t=s.addressId?"更新地址失败":"新增地址失败",{data:b}=await be(s);b?(ge({message:f,wordBreak:"break-word",forbidClick:!0,duration:500}),setTimeout(()=>{p.back()},500)):H({message:t,wordBreak:"break-word",forbidClick:!0})};return(f,t)=>{const b=Ie,y=Ce,N=Se;return le(),de("div",Ne,[r("div",Ee,[u(pe,{title:s.addressId?"编辑地址":"新增地址"},null,8,["title"])]),r("div",Pe,[r("div",Oe,[Ue,B(r("input",{type:"text",class:"right","onUpdate:modelValue":t[0]||(t[0]=i=>s.userName=i)},null,512),[[I,s.userName]])]),r("div",De,[Fe,B(r("input",{type:"number",class:"right","onUpdate:modelValue":t[1]||(t[1]=i=>s.telNumber=i)},null,512),[[I,s.telNumber]])]),r("div",He,[Re,B(r("input",{type:"text",class:"right","onUpdate:modelValue":t[2]||(t[2]=i=>s.address=i),readonly:"",onClick:t[3]||(t[3]=i=>v.value=!0)},null,512),[[I,s.address]]),u(y,{show:v.value,"onUpdate:show":t[6]||(t[6]=i=>v.value=i),round:"",position:"bottom"},{default:ne(()=>[u(b,{modelValue:C.value,"onUpdate:modelValue":t[4]||(t[4]=i=>C.value=i),title:"请选择所在地区",options:ce(d),onClose:t[5]||(t[5]=i=>v.value=!1),onFinish:h},null,8,["modelValue","options"])]),_:1},8,["show"])]),r("div",$e,[Ke,B(r("input",{type:"text",class:"right","onUpdate:modelValue":t[7]||(t[7]=i=>s.detailadress=i)},null,512),[[I,s.detailadress]])]),r("div",Me,[Le,u(N,{modelValue:s.checked,"onUpdate:modelValue":t[8]||(t[8]=i=>s.checked=i),"active-color":"#cea62a","inactive-color":"#dcdee0",class:"switch"},null,8,["modelValue"])])]),r("button",{class:"addAddress",onClick:V},ie(s.addressId?"编辑":"新增"),1)])}}},as=Z(ze,[["__scopeId","data-v-d7d97d7a"]]);export{as as default};
